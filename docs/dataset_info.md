# Dataset Documentation

The dataset is generated by `generate.py` and stored in `artifacts/dataset/`. It consists of multiple pickle shards (`shard_*.pkl`) which can be converted to a single CSV using `convert_to_csv.py`.

## CSV Structure (`full_dataset.csv`)

Each row represents one snapshot of the microgrid state.

| Column Name | Unit | Description |
| :--- | :--- | :--- |
| `sample_id` | UUID | Unique identifier for the snapshot. |
| `total_loss_pu` | p.u. | **Target Variable.** The total Ohmic loss in the system ($I^2 R$). |
| `min_voltage_pu` | p.u. | The lowest voltage recorded at any node in the grid. |
| `max_voltage_pu` | p.u. | The highest voltage recorded (usually 1.0 at PCC). |
| `total_load_pu` | p.u. | Sum of all active power injections (Load + Gen). |
| `node_count` | Int | Number of nodes in the graph. |
| `edge_count` | Int | Number of edges (lines) in the graph. |
| `nodes_json` | JSON | Full list of node attributes (Voltage, Power, Type, SOC). |
| `edges_json` | JSON | Full list of edge attributes (Resistance, Status). |

## JSON Column Details

### `nodes_json`
A list of dictionaries, where each dictionary contains:
*   `id`: Node ID (Integer).
*   `v`: Voltage magnitude (p.u.).
*   `p`: Active power injection (p.u.). Positive = Generation, Negative = Load.
*   `type`: Component type (`root`, `station`, `charger`, `pv`, `storage`).
*   `soc`: State of Charge (0.0 - 1.0), only for storage nodes.

### `edges_json`
A list of dictionaries, where each dictionary contains:
*   `u`: Source Node ID.
*   `v`: Target Node ID.
*   `r`: Resistance (p.u.).
*   `status`: Switch state (1 = Closed/Connected, 0 = Open/Disconnected).

## Units
*   **p.u. (Per Unit):** All electrical quantities are normalized. $V_{base} = 400V$, $P_{base} = 100kVA$.